<link rel="stylesheet" href="~/css/contacto.css" asp-append-version="true" />

<main>
    <!-- Sección Hero -->
    <section class="hero-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h1 class="hero-title">Contáctenos</h1>
                </div>
            </div>
        </div>
    </section>

    <!-- Espaciador -->
    <div class="section-spacer"></div>

    <!-- Sección de Soporte -->
    <section class="support-section">
        <div class="container">
            <div class="row justify-content-center">
                <div class="col-lg-8 text-center">
                    <h2 class="support-title text-center-mobile mobile-mb-4">
                        Para soporte de nuestros servicios ESET, Asistencia Remota, Chat de ayuda, WhatsApp y Generar un caso de Soporte
                    </h2>
                    <a href="https://helpdesk.esetca.com/es/support/home" class="support-button" target="_blank">
                        Asistencia
                    </a>
                </div>
            </div>
        </div>
    </section>

    <!-- Espaciador -->
    <div class="section-spacer"></div>

    <!-- Sección de Contacto y Formulario -->
    <section class="contact-section">
        <div class="container">
            <div class="row align-items-stretch">
                <div class="col-lg-6 mb-4 mb-lg-0">
                    <div class="contact-info h-100">
                        <h3 class="text-center-mobile mobile-mb-4">Información de Contacto</h3>

                        <div class="contact-info-item">
                            <i class="bi bi-envelope contact-info-icon"></i>
                            <div>
                                <h6 class="mb-2">Correo Electrónico</h6>
                                <p class="mb-0">spti@sistemasanaliticos.cr</p>
                                <p class="mb-0">soporteeset@sistemasanaliticos.cr</p>
                            </div>
                        </div>

                        <div class="contact-info-item">
                            <i class="bi bi-telephone contact-info-icon"></i>
                            <div>
                                <h6 class="mb-2">Teléfono</h6>
                                <p class="mb-0">+506 4080-9300</p>
                            </div>
                        </div>

                        <div class="contact-info-item">
                            <i class="bi bi-geo-alt contact-info-icon"></i>
                            <div>
                                <h6 class="mb-2">Dirección</h6>
                                <p class="mb-0">San José, Escazú, San Rafael, Guapellín, Última Park</p>
                            </div>
                        </div>

                        <div class="contact-info-item">
                            <i class="bi bi-clock contact-info-icon"></i>
                            <div>
                                <h6 class="mb-2">Horario de Atención</h6>
                                <p class="mb-0">Lunes a Viernes: 8:00 AM - 5:00 PM</p>
                                <p class="mb-0">Sábados: 9:00 AM - 12:00 PM</p>
                            </div>
                        </div>
                    </div>
                </div>
                <div class="col-lg-6">
                    <div class="contact-form-container h-100">
                        <h3 class="form-title text-center-mobile mobile-mb-4">Envíanos un mensaje</h3>

                        <form id="contact-form" asp-action="EnviarCorreo" asp-controller="Contacto" method="post">
                            @Html.AntiForgeryToken()

                            <div class="mb-3">
                                <label for="nombre" class="form-label required-field">Nombre</label>
                                <input type="text" class="form-control" id="nombre" name="nombre" placeholder="Tu nombre" required>
                                <div class="invalid-feedback">
                                    Por favor ingresa tu nombre.
                                </div>
                            </div>
                                
                            <div class="mb-3">
                                <label for="email" class="form-label required-field">Correo Electrónico</label>
                                <input type="email" class="form-control" id="email" name="email" placeholder="tu@email.com" required>
                                <div class="invalid-feedback">
                                    Por favor ingresa un correo electrónico válido.
                                </div>
                            </div>
                                
                            <div class="mb-3">
                                <label for="telefono" class="form-label required-field">Teléfono</label>
                                <input type="tel" class="form-control" id="telefono" name="telefono" placeholder="Tu número de teléfono" maxlength="8" required>
                                <div class="invalid-feedback">
                                    Por favor ingresa tu número de teléfono.
                                </div>
                            </div>
                                
                            <div class="mb-4">
                                <label for="mensaje" class="form-label required-field">Mensaje</label>
                                <textarea class="form-control" id="mensaje" name="mensaje" rows="4" placeholder="¿En qué podemos ayudarte?" required></textarea>
                                <div class="invalid-feedback">
                                    Por favor ingresa tu mensaje.
                                </div>
                            </div>
                                
                            <div class="d-grid">
                                <button type="submit" class="submit-button" id="submit-button">
                                    <span id="button-text">Enviar</span>
                                    <img src="https://www.sistemasanaliticos.cr/wp-content/plugins/wpforms-lite/assets/images/submit-spin.svg" 
                                            class="spinner" 
                                            id="submit-spinner" 
                                            alt="Cargando">
                                </button>
                            </div>
                                
                            <div class="alert alert-success mt-3 d-none" id="success-message">
                                ¡Mensaje enviado con éxito! Nos pondremos en contacto contigo pronto.
                            </div>
                                
                            <div class="alert alert-danger mt-3 d-none" id="error-message">
                                Hubo un error al enviar el mensaje. Por favor intenta de nuevo.
                            </div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <!-- Sección del Mapa CON PADDING RESPONSIVE -->
    <section class="map-section">
        <div class="container-fluid px-0">
            <div class="row justify-content-center mx-0">
                <div class="col-12 px-0">
                    <h3 class="text-center mb-4 text-center-mobile mobile-mb-4">Nuestra Ubicación</h3>
                    <div class="map-wrapper">
                        <div class="map-container">
                            <iframe 
                                src="https://maps.google.com/maps?q=sistemas%20analiticos&#038;t=m&#038;z=10&#038;output=embed&#038;iwloc=near"
                                title="Ubicación de Sistemas Analíticos"
                                aria-label="Ubicación de Sistemas Analíticos"
                                loading="lazy"
                                allowfullscreen>
                            </iframe>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src='~/js/contactojs.js'></script>

    <script>
        document.getElementById("contact-form").addEventListener("submit", function (e) {
            e.preventDefault();

            const form = e.target;

            fetch(form.action, {
                method: "POST",
                body: new FormData(form)
            })
            .then(r => r.json())
            .then(data => {
                if (data.success) {
                    Swal.fire({
                        icon: "success",
                        title: "Mensaje enviado",
                        text: "Tu mensaje ha sido enviado correctamente.",
                        confirmButtonColor: "#3085d6"
                    });

                    form.reset();
                } else {
                    Swal.fire({
                        icon: "error",
                        title: "Error",
                        text: "Hubo un problema al enviar el mensaje: " + data.error,
                        confirmButtonColor: "#d33"
                    });
                }
            })
            .catch(() => {
                Swal.fire({
                    icon: "error",
                    title: "Error inesperado",
                    text: "No se pudo conectar con el servidor.",
                    confirmButtonColor: "#d33"
                });
            });
        });
    </script>
</main>